import type React from 'react';
import { useEffect, useState } from 'react';
import { Text } from 'ink';

type SpinnerProps = {
  /**
   * Type of spinner
   * @default 'dots'
   */
  type?: 'dots' | 'dots2' | 'dots3' | 'dots4' | 'dots5' | 'dots6' | 'dots7' | 'dots8' | 'dots9' | 'dots10' | 'dots11' | 'dots12' | 'line' | 'line2' | 'pipe' | 'simpleDots' | 'simpleDotsScrolling' | 'star' | 'star2' | 'flip' | 'hamburger' | 'growVertical' | 'growHorizontal' | 'balloon' | 'balloon2' | 'noise' | 'bounce' | 'boxBounce' | 'boxBounce2' | 'triangle' | 'arc' | 'circle' | 'squareCorners' | 'circleQuarters' | 'circleHalves' | 'squish' | 'toggle' | 'toggle2' | 'toggle3' | 'toggle4' | 'toggle5' | 'toggle6' | 'toggle7' | 'toggle8' | 'toggle9' | 'toggle10' | 'toggle11' | 'toggle12' | 'toggle13' | 'arrow' | 'arrow2' | 'arrow3' | 'bouncingBar' | 'bouncingBall' | 'smiley' | 'monkey' | 'hearts' | 'clock' | 'earth' | 'moon' | 'runner' | 'pong' | 'shark' | 'dqpb' | 'weather' | 'christmas';
  /**
   * Text to display after the spinner
   */
  label?: string;
  /**
   * Color of the spinner
   * @default 'blue'
   */
  _color?: string;
  /**
   * Speed of the spinner in milliseconds
   * @default 150
   */
  speed?: number;
};

const SPINNERS: Record<string, string[]> = {
  dots: ['РаІ', 'РаЎ', 'Ра╣', 'РаИ', 'Ра╝', 'Ра┤', 'Рад', 'РаД', 'РаЄ', 'РаЈ'],
  dots2: ['РБЙ', 'РБй', 'РБ╗', 'Рб┐', 'РА┐', 'РБЪ', 'РБ»', 'РБи'],
  dots3: ['РаІ', 'РаЎ', 'Раџ', 'Раъ', 'Раќ', 'Рад', 'Ра┤', 'Ра▓', 'Ра│', 'РаЊ'],
  dots4: ['Раё', 'Рає', 'РаЄ', 'РаІ', 'РаЎ', 'РаИ', 'Ра░', 'Раа', 'Ра░', 'РаИ', 'РаЎ', 'РаІ', 'РаЄ', 'Рає'],
  dots5: ['РаІ', 'РаЎ', 'Раџ', 'Рањ', 'Раѓ', 'Раѓ', 'Рањ', 'Ра▓', 'Ра┤', 'Рад', 'Раќ', 'Рањ', 'Раљ', 'Раљ', 'Рањ', 'РаЊ', 'РаІ'],
  dots6: ['РаЂ', 'РаЅ', 'РаЎ', 'Раџ', 'Рањ', 'Раѓ', 'Раѓ', 'Рањ', 'Ра▓', 'Ра┤', 'Рац', 'Раё', 'Раё', 'Рац', 'Ра┤', 'Ра▓', 'Рањ', 'Раѓ', 'Раѓ', 'Рањ', 'Раџ', 'РаЎ', 'РаЅ', 'РаЂ'],
  dots7: ['Раѕ', 'РаЅ', 'РаІ', 'РаЊ', 'Рањ', 'Раљ', 'Раљ', 'Рањ', 'Раќ', 'Рад', 'Рац', 'Раа', 'Раа', 'Рац', 'Рад', 'Раќ', 'Рањ', 'Раљ', 'Раљ', 'Рањ', 'РаЊ', 'РаІ', 'РаЅ', 'Раѕ'],
  dots8: ['РаЂ', 'РаЂ', 'РаЅ', 'РаЎ', 'Раџ', 'Рањ', 'Раѓ', 'Раѓ', 'Рањ', 'Ра▓', 'Ра┤', 'Рац', 'Раё', 'Раё', 'Рац', 'Раа', 'Раа', 'Рац', 'Рад', 'Раќ', 'Рањ', 'Раљ', 'Раљ', 'Рањ', 'РаЊ', 'РаІ', 'РаЅ', 'Раѕ', 'Раѕ'],
  dots9: ['Рб╣', 'Рб║', 'Рб╝', 'РБИ', 'РБЄ', 'РАД', 'РАЌ', 'РАЈ'],
  dots10: ['Рбё', 'Рбѓ', 'РбЂ', 'РАЂ', 'РАѕ', 'РАљ', 'РАа'],
  dots11: ['РаЂ', 'Раѓ', 'Раё', 'РАђ', 'Рбђ', 'Раа', 'Раљ', 'Раѕ'],
  dots12: ['РбђРађ', 'РАђРађ', 'РаёРађ', 'РбѓРађ', 'РАѓРађ', 'РаЁРађ', 'РАЃРађ', 'РаЇРађ', 'РАЅРаЂ', 'РбЅРаЂ', 'РаЅРаЅ', 'РаЅРаѓ', 'РаЅРбђ', 'РаѕРаЕ', 'РаѕРАЅ', 'РаІРаЂ', 'РаІРађ', 'РаЇРбђ', 'РАІРађ', 'РАЇРађ', 'РАЅРађ', 'РбѕРађ', 'РбѓРађ', 'РАѓРађ'],
  line: ['-', '\\', '|', '/'],
  line2: ['Раѓ', '-', 'РђЊ', 'Рђћ', 'РђЊ', '-'],
  pipe: ['Рћц', 'Рћў', 'Рћ┤', 'Рћћ', 'Рћю', 'Рћї', 'Рћг', 'Рћљ'],
  simpleDots: ['.  ', '.. ', '...', '   '],
  simpleDotsScrolling: ['.  ', '.. ', '...', ' ..', '  .', '   '],
  star: ['РюХ', 'Рюх', 'Рю┤', 'Рю│', 'Рю║', 'Рю╣', 'РюИ', 'Рюи', 'РюХ'],
  star2: ['+', 'x', '*'],
  flip: ['_', '_', '_', '-', '`', '`', '\'', '┬┤', '-', '_', '_', '_'],
  hamburger: ['Рў▒', 'Рў▓', 'Рў┤', 'Рў▓'],
  growVertical: ['РќЂ', 'РќЃ', 'Рќё', 'РќЁ', 'Рќє', 'РќЄ', 'Рќѕ', 'РќЄ', 'Рќє', 'РќЁ', 'Рќё', 'РќЃ'],
  growHorizontal: ['РќЈ', 'Рќј', 'РќЇ', 'Рќї', 'РќІ', 'Рќі', 'РќЅ', 'Рќі', 'РќІ', 'Рќї', 'РќЇ', 'Рќј'],
  balloon: [' ', '.', 'o', 'O', '@', '*', ' '],
  balloon2: ['.', 'o', 'O', '┬░', 'O', 'o', '.'],
  noise: ['РќЊ', 'Рќњ', 'РќЉ'],
  bounce: ['РаЂ', 'Раѓ', 'Раё', 'Раѓ'],
  boxBounce: ['Рќќ', 'Рќў', 'РќЮ', 'РќЌ'],
  boxBounce2: ['Рќї', 'Рќђ', 'Рќљ', 'Рќё'],
  triangle: ['РЌб', 'РЌБ', 'РЌц', 'РЌЦ'],
  arc: ['РЌю', 'РЌа', 'РЌЮ', 'РЌъ', 'РЌА', 'РЌЪ'],
  circle: ['РЌА', 'РіЎ', 'РЌа'],
  squareCorners: ['РЌ░', 'РЌ│', 'РЌ▓', 'РЌ▒'],
  circleQuarters: ['РЌ┤', 'РЌи', 'РЌХ', 'РЌх'],
  circleHalves: ['РЌљ', 'РЌЊ', 'РЌЉ', 'РЌњ'],
  squish: ['РЋФ', 'РЋф'],
  toggle: ['РіХ', 'Ріи'],
  toggle2: ['РќФ', 'Рќф'],
  toggle3: ['РќА', 'Рќа'],
  toggle4: ['Рќа', 'РќА', 'Рќф', 'РќФ'],
  toggle5: ['Рќ«', 'Рќ»'],
  toggle6: ['РЌЈ', 'РЌІ'],
  toggle7: ['Рд┐', 'РЌІ'],
  toggle8: ['РЌЅ', 'РЌј'],
  toggle9: ['сіѓ', 'сіђ', 'сіЂ'],
  toggle10: ['РдЙ', 'Рд┐'],
  toggle11: ['РЌЅ', 'РЌ»'],
  toggle12: ['РГў', 'РГЋ'],
  toggle13: ['РГЋ', 'РГќ'],
  arrow: ['Рєљ', 'Рєќ', 'РєЉ', 'РєЌ', 'Рєњ', 'Рєў', 'РєЊ', 'РєЎ'],
  arrow2: ['Ргє№ИЈ ', 'РєЌ№ИЈ ', 'РъА№ИЈ ', 'Рєў№ИЈ ', 'РгЄ№ИЈ ', 'РєЎ№ИЈ ', 'РгЁ№ИЈ ', 'Рєќ№ИЈ '],
  arrow3: ['Рќ╣Рќ╣Рќ╣Рќ╣Рќ╣', 'РќИРќ╣Рќ╣Рќ╣Рќ╣', 'Рќ╣РќИРќ╣Рќ╣Рќ╣', 'Рќ╣Рќ╣РќИРќ╣Рќ╣', 'Рќ╣Рќ╣Рќ╣РќИРќ╣', 'Рќ╣Рќ╣Рќ╣Рќ╣РќИ'],
  bouncingBar: ['[    ]', '[=   ]', '[==  ]', '[=== ]', '[ ===]', '[  ==]', '[   =]', '[    ]', '[   =]', '[  ==]', '[ ===]', '[====]', '[=== ]', '[==  ]', '[=   ]'],
  bouncingBall: ['( РЌЈ    )', '(  РЌЈ   )', '(   РЌЈ  )', '(    РЌЈ )', '(     РЌЈ)', '(    РЌЈ )', '(   РЌЈ  )', '(  РЌЈ   )', '( РЌЈ    )', '(РЌЈ     )'],
  smiley: ['­Ъўё', '­ЪўЮ'],
  monkey: ['­ЪЎѕ', '­ЪЎѕ', '­ЪЎЅ', '­ЪЎі', '­ЪЎѕ', '­ЪЎЅ', '­ЪЎі'],
  hearts: ['­ЪњЏ', '­ЪњЎ', '­Ъњю', '­Ъњџ', 'РЮц№ИЈ'],
  clock: ['­ЪЋљ', '­ЪЋЉ', '­ЪЋњ', '­ЪЋЊ', '­ЪЋћ', '­ЪЋЋ', '­ЪЋќ', '­ЪЋЌ', '­ЪЋў', '­ЪЋЎ', '­ЪЋџ', '­ЪЋЏ'],
  earth: ['­ЪїЇ', '­Ъїј', '­ЪїЈ'],
  moon: ['­ЪїЉ', '­Ъїњ', '­ЪїЊ', '­Ъїћ', '­ЪїЋ', '­Ъїќ', '­ЪїЌ', '­Ъїў'],
  runner: ['­ЪџХ', '­ЪЈЃ'],
  pong: ['РќљРаѓ       Рќї', 'РќљРаѕ       Рќї', 'Рќљ Раѓ      Рќї', 'Рќљ Раа      Рќї', 'Рќљ  РАђ     Рќї', 'Рќљ  Раа     Рќї', 'Рќљ   Раѓ    Рќї', 'Рќљ   Раѕ    Рќї', 'Рќљ    Раѓ   Рќї', 'Рќљ    Раа   Рќї', 'Рќљ     РАђ  Рќї', 'Рќљ     Раа  Рќї', 'Рќљ      Раѓ Рќї', 'Рќљ      Раѕ Рќї', 'Рќљ       РаѓРќї', 'Рќљ       РааРќї', 'Рќљ       РАђРќї', 'Рќљ      Раа Рќї', 'Рќљ      Раѓ Рќї', 'Рќљ     Раѕ  Рќї', 'Рќљ     Раѓ  Рќї', 'Рќљ    Раа   Рќї', 'Рќљ    РАђ   Рќї', 'Рќљ   Раа    Рќї', 'Рќљ   Раѓ    Рќї', 'Рќљ  Раѕ     Рќї', 'Рќљ  Раѓ     Рќї', 'Рќљ Раа      Рќї', 'Рќљ РАђ      Рќї', 'РќљРаа       Рќї'],
  shark: [
    'Рќљ|____________Рќї',
    'Рќљ_|___________Рќї',
    'Рќљ__|__________Рќї',
    'Рќљ___|_________Рќї',
    'Рќљ____|________Рќї',
    'Рќљ_____|_______Рќї',
    'Рќљ______|______Рќї',
    'Рќљ_______|_____Рќї',
    'Рќљ________|____Рќї',
    'Рќљ_________|___Рќї',
    'Рќљ__________|__Рќї',
    'Рќљ___________|_Рќї',
    'Рќљ____________|Рќї',
    'Рќљ____________/|Рќї',
    'Рќљ___________/|_Рќї',
    'Рќљ__________/|__Рќї',
    'Рќљ_________/|___Рќї',
    'Рќљ________/|____Рќї',
    'Рќљ_______/|_____Рќї',
    'Рќљ______/|______Рќї',
    'Рќљ_____/|_______Рќї',
    'Рќљ____/|________Рќї',
    'Рќљ___/|_________Рќї',
    'Рќљ__/|__________Рќї',
    'Рќљ_/|___________Рќї',
    'Рќљ/|____________Рќї'
  ],
  dqpb: ['d', 'q', 'p', 'b'],
  weather: ['Рўђ№ИЈ ', 'Рўђ№ИЈ ', 'Рўђ№ИЈ ', '­Ъїц ', 'РЏЁ№ИЈ ', '­ЪїЦ ', 'РўЂ№ИЈ ', '­ЪїД ', '­Ъїе ', '­ЪїД ', '­Ъїе ', '­ЪїД ', '­Ъїе ', 'РЏѕ ', '­Ъїе ', '­ЪїД ', '­Ъїе ', '­ЪїД ', '­Ъїе ', 'РЏЁ№ИЈ ', '­Ъїц ', 'Рўђ№ИЈ ', 'Рўђ№ИЈ '],
  christmas: ['­Ъї▓', '­Ъјё'],
};

export const Spinner: FC<SpinnerProps> = ({
  type = 'dots',
  label = '',
  _color = 'blue',
  speed = 150,
}) => {
  const [frame, setFrame] = useState(0);
  const frames = SPINNERS[type] || SPINNERS.dots;
  
  useEffect(() => {
    const timer = setInterval(() => {
      setFrame((prevFrame: number) => (prevFrame + 1) % frames.length);
    }, speed);
    
    return () => {
      clearInterval(timer);
    };
  }, [frames.length, speed]);
  
  // Color support can be added later if needed
  return `${frames[frame]} ${label}`;
};

export default Spinner;
